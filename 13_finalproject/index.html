<!DOCTYPE html>
<html lang="en">

<title>PS70: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #541313;">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h2 class="nav-title">PS70 Fall 2024</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Hoome</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">
<p class="margin"></p>

<h2>Final Project: BIKE TURNING SIGNAL SYSTEM</h2>

<h2>VIDEO PLACEHOLDER</h2>

<h3><a href="../13_finalproject/Process/index.html">Process</a></h3>
<p class="margin">   </p>
<div class="flexrow">
  <a id="btn" href="Code.zip" download>Download my files from this week!
  </a>
</div>
<p class="margin">   </p>

<h5>In addition to the <a href="../07_outputs/index.html">MVP</a> progress. This couple of weeks we were assigned to continue developing
  our projects and figure out the main challenges. For my project, at the MVP stage I had already created all the components needed,
  and in theory I justt needed to solder and encapsulate everything. However, after the MVP, I received a lot of feedback
  which helped me imporve my designs. The main improvements I focused on were the following:</h5>

<h4>1. Improve Visibility</h4>
<h5>One of my concerns previous to the MVP was whether the LED's would be visible
  and truly make bikes visible. After pondering upon that, I decided to change the 5V LED strip to a 12V LED strip.
  I ordered the following <a href="https://www.amazon.com/ALITOVE-Addressable-Programmable-Waterproof-Self-Adhesive/dp/B07M8GKBJM/ref=sr_1_4?crid=1R91IFZU9VZZQ&dib=eyJ2IjoiMSJ9.fvyaJ7A5ovxLEubhSHEp7AmlzY6JeFaMi5uky0cY1yRn4iGfd3_ITLBIFr8W_jxWHbIns5YP8_1xsyWQa1SFlpQ2fLQAd5l2bVXRPpdrECMob86GyWqlKcU5et9N2MHG6ZQxWfYPbMQKpb9yybsxhiZK2ZiKHwW-I4HonKINZ4a--TwASkOowga8h8QO1B9esTX8Zn57RTThFG0qvBcMS0hgT9fbcE_L9Z0KPOE-jMBHZChc8MvpH28TNYjf_JXyUxenFMZkfoU_ktC0I24p1R96PnMlHjUNRbr0TP9O8J0.e7Vy04Eo-0cbv_TpvqiqyYXzVOGlJcNhfJxT0rRoNgw&dib_tag=se&keywords=waterproof%2B12v%2Baddressable%2Bleds&qid=1762971403&s=hi&sprefix=waterproof%2B12v%2Baddressable%2Bleds%2Ctools%2C128&sr=1-4&th=1">product</a> via Amazon.
  I chose it because it complied with the following criteria: 12V voltage to ensure increased brightness, IP 65 which indicates water resistance and dust resistance
, and lastly they were addressable and cuttable.  </h5>

<br/>
<h5> This implied another challenge because the ESP32 can only output 5V and it would not be convenient to implement a 12V
  battery on top of the already required 5V battery for the microcontroller. To solve this issue I decided to use
  a booster which would take the 5V from the power and ground from my ESP32 and boost it to 12V for the LED strip.
  I was able to make it work; however, it unfortunately fried my microcontroller. I believe that this happened because
  the information pin requires even a higher transistor (I was using 1k). Everything was working fine until suddenly
  fumes started coming out of the ESP32. 
</h5>
<img width="640" height="640" src="./led.jpg">
<img width="640" height="640" src="./booster.jpg">
<br/>
<h5>This has definetly been the most frustrating part of my process so far. I had already solved the most complex 
  coding issues which I'll describe later. Nevertheless, I have to remember that this is all part of the engineering 
  and design process, and that failing and burning stuff means that progress is being made. To ensure that this 
  was not just a frustrating moment, I checked each component afterwards and the resistor had some char on it. 
  After consulting with Bobby, I will research other projects with 12V or higher led strips and emulate them; specifically,
  I will ask Xander since I believe he is also working with high voltage lights. 
</h5>
<h4>Use screw for clamping mechanism.</h4>
<h5>One of my concerns with my device is that the clamp was not tight enough but that it would never be so since 
  I'd require an exact value. Which even if I managed to obtain, would be useless for different bikes. Consequently,
  incorporating feedback from my MVP, I added a screw mechanism to tighten the clamp. I am very happy with how
  the mechanism works and it is a substantial improvement from the past version. This will enable even 
  easier use of the switches since the base has more tension.</h5>
<img width="640" height="640" src="./clamp.jpg">
<img width="640" height="640" src="./clampscrew.jpg">

<h4>3. Transform into wireless device</h4>
<h5>One of the main suggestions I received was to make the device wirless since for the MVP, there was a wire going
  all through my bike. Additionally, this would create adittional challenges for water proofness. </h5>
<br/>
<h5> To achieve this I decided to use an ESP32 at the baseplate and a Xiao at the switch in the handrail. I chose 
  those chips because they can communicate via the ESP32 now protocol. This meant that I had to re-write the 
  entire code, but I am glad I did because I learned a lot about wireless communication, something I had not done at 
  all before. 
</h5>
<br/>
<h5> Download my code ! </h5>
<h5> The way this works is that the xiao is checking the state of the switches (ON or OFF) every 2 seconds. Depending
  on that state, it sends a message to the ESP32 via ESP-NOW protocol. The ESP32 is always listening for messages
  and when it receives one, it follows the instruction the xiao gives it (if the xiao says left is ON, turn on the left signal).
  I am extremely happy with how this worked out and I learned a lot. I focused on making an abstraction of my project 
  and thus included a green LED representing the left turning signal. Here is the first result. 
</h5>

<video width="640" height="480" controls>
  <source src="./1 (1).mp4" type="video/mp4">
</video>

<h5> This then evolved to this to incoporate both lights:</h5>

<video width="640" height="480" controls>
  <source src="./2 (1).mp4" type="video/mp4">
</video>

<h4>4. Encapsulate</h4>
<h5> Lastly, one of the most important things was to ensure that everything wuold fit within the tight spaces I had created. 
  Obviously, no breadboard would be either reliable nor small enough to fit within the case. Consequently, I took my xiao circuit,
  and started shortening wires and soldering everything. I enjoyed this process a lot since I hadn't had an opportunity to get 
  deep into soldering before. The most challengin part of the process was to de solder the head pins from the xiao. I used 
  the desoldering pump. After the process, this was my result:
</h5>
<img width="640" height="640" src="./solder.jpg">
<h5>New challenges emerged because trying the circuit, one switch was broken, and so I had to replace it. Additionally,
  I realized that I needed to use duct tape to avoid shorts or unwanted contacts. Finally, I encapsulated everything
  within the case. Here is the final result:
</h5>
<img width="640" height="640" src="./Duct.jpg">
<h5>As for the baseplate, since the ESP32 fried, I never got a chance install everything. However, I know what I am doing once 
  I get my ESP32 replacement. I will solder everything, use duct tape to avoid shorts, and encapsulate everything within the case.
  I already designed the case to have enough space for everything, including the spacious compartment for the battery pack.
</h5>
<img width="640" height="640" src="./Baseplate.png">
\
<h5>Talking about the baseplate, I noticed that its angles were too sharp for the LED strip; consequently, 
  I will redesign the baseplate to have broader curves so the LED strip can fit better and avoid breaking.
</h5>

<h3>Key Takeaways and Future actions</h3>
<h5>I have to acknowledge that things will go wrong and learn from those mistakes. It is ok to fail and even desirable if 
  you learn from your failures. 
</h5>
<br/>
<h5>There is no reason to not ask for help to my peers with similar projects. I will reach out to Xander to ask about high voltage LED strips
  and how to properly connect them to a microcontroller.
</h5>
<br/>
<h5> Try new stuff and keep iterating!! I never thought that I would be able to make a wireless communication system
  from scratch 3 months ago. However, by trying new things and pushing myself I was able to achieve it.
</h5>
<br/>
<h5>
  Creating an abstraction of a project is extremely helpful to debug and test. By using simple LEDs to represent the turning signals,
  I was able to focus on the wireless communication first, which was the most challenging part.
</h5>
<br/> 
<h5>
  Next steps: 
  <ul>
    <li> Redesign baseplate with broader angles.</li>
    <li> Ask for new ESP32 and finish soldering and encapsulating the baseplate. </li>
    <li> Test the entire system together and make sure everything works as expected. </li>
    <li> Ensure everything is waterproof. </li>
    <li> Screw in the baseplate. </li>
    <li> Ride the bike and test in real life conditions. </li>

  </ul>
</h5>

</div>
</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>